name: Uzun SSH EriÅŸimi (6 saat)

on:
  workflow_dispatch:

jobs:
  ssh:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 saat

    steps:
      - name: SSH baÅŸlat (tmate kÄ±sa ve arka planda)
        run: |
          # Yeni tmate session baÅŸlat ve arka planda Ã§alÄ±ÅŸtÄ±r
          tmate -S /tmp/tmate.sock new-session -d
          # Session hazÄ±r olana kadar bekle
          tmate wait tmate-ready
          # SSH linkini dosyaya yaz
          tmate display -p '#{tmate_ssh}' > tmate_link.txt
          echo "ğŸ”¹ TMATE LINK: $(cat tmate_link.txt)"
          # 10 saniye bekle, step tamamlanacak
          sleep 10
        shell: bash

      - name: KapanmayÄ± engelle (sonsuz bekle)
        run: |
          echo "â³ Sunucu aÃ§Ä±k, baÄŸlantÄ±yÄ± SSH ile kurdun mu? Otomatik kapanmasÄ±n diye bekleniyor..."
          while true; do
            echo "âŒ› Sunucu hala Ã§alÄ±ÅŸÄ±yor: $(date)"
            sleep 60
          done
